language: node_js

node_js:
  - "10"

branches:
  only:
  - master
  - develop
  - "/^v.*$/"

before_install:
  - gem install sass

before_script:
  - npm install

before_deploy:
  - npm run prerelease

deploy:
  - provider: releases
    edge: true
    skip_cleanup: true
    api_key:
      secure: TSYY55dtlHZyz7RmTzfUKx6mSTofoCMVBGpBZvgfCc3cHYMJN0sPYy51YCqomxBEb0PQx+EKidh9pHMIke6yHlD61n6KdlHWpb7oI3FRdhBdsVgNPiswCSPsEMNhGT0R89th1UrLw4rcwmInSy4YDdo0YdvmGEePjUIq9Veu5iDgoR1o8dxq/pWasRDG6HMgDZ/GwVHvvtRoyZuLrHZ8FxjquygRzpQIccY/HFIT+0IJmYwadkgXGKm3k1xqOB2SexQNmYsfuu/dh9W34AbA0RU4xYwHql4KaruDP3E72cEzFDhimAXlwJsc1K6Gm8H1kSFqno8XTk8HckRU2V9Ew3B0171JDGvSaKSS2fv+nhMcs1EeBTh+XJekKLBhP9Ovb6oKNafLwtr6FyDll6ALeKumUM70knlesNIBGRpvlgq3cp8Aqbft8R9/HVCyMh3t8GQpzJoZ2jTKrklrQ2JW+qU8JXJMaVrG8n6XcnH/Vxdoxjt9bT9FL1/5B5XbKxGq+oPZfnlOl6eAndB+NstgTqCI50C3yOjIREBA1QgxzYIhsY1eUh7t1T08izZ33T8vleMIxhm4iJmwrDZo7mDJ4ygCOTLAx6BkbzReU3CjqOSQpq/hOKMKfOwqnlFHWtGlx7p18dQfMWttj6mrx4usrK9lenuhWoPlenDEvmSPzww=
    file: build.zip
    on:
      branch: master
      tags: true
      repo: higlass/higlass-app
  - provider: npm
    edge: true
    skip_cleanup: true
    email: service@lekschas.de
    api_key:
      secure: SF430bbOY6MlZbvn/JOBowLIEQww5fcP+Mfljl8iJiraDNHNFT9ZoR+biXHeGq7XbNMQrmIQIZfHj6PCSNwg4T8foqm/gYNSb+KViwwWGwdUeIFDBbUOQ8VnkbRAe87Tjnou0pH3easEVI/qrmJC+jgFT6YSmmj2vDr3M8i7gl3de0qFa2y180gJtZMOcxO/MzVNnXdNyKzj0k1/Q55V3aIo7LHDXwa5oZcFGHM3E9D6CsXxtuh7TlfePGFc6a8MPrWIttRBadeviyDtLtXmoGZfcsuZMVfaDtikURO9/SL0zEt/JvliOohv0KfkO6WConttNFT7UQxITNgjk/Qm182YEnx+2MINyPdDKHlNDIDOoKyc+Kwy6clfZbCsTP/vI55gmNl75nuX/BWwL6o9jTUfeeFOmVFGGK07EGVS5O5HVWqyGdo/LS/pg52lC/yBzSY7ZxKtlo1+HjC3aLyIOQF14YcJoTSMYUB/aaztHKj3mpgm2ypHy8dzPKQ3FU/hovgVOqaHYanik34OzE+jcDdYj6ZCOiyMUuLVhK6FrGr4FXW3/EEmrD4K40Xy+6Hbo1diOqeQEcCNGWKces3OIvlYHp9y9i4Na1nZ1JJbSe/kxEYpR/u0g4whwDS4JzMgQKNNUZedscLvJM29NfLMp/hkT3Pniu/b9U0D5HMzdwY=
    on:
      branch: master
      tags: true
      repo: higlass/higlass-app
